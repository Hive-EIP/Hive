<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Réinitialisation du mot de passe</title>
</head>
<body>
<h2>Réinitialisation du mot de passe</h2>
<form id="resetForm">
  <label>Nouveau mot de passe :
    <input type="password" name="newPassword" required>
  </label>
  <br><br>
  <button type="submit">Réinitialiser</button>
</form>

<script>
  const token = window.location.pathname.split('/').pop();

  document.getElementById("resetForm").addEventListener("submit", async function (e) {
    e.preventDefault();
    const newPassword = this.newPassword.value;

    const response = await fetch('http://localhost:4000/auth/reset-password', {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify({ token, newPassword })
    });

    const data = await response.json();
    alert(JSON.stringify(data, null, 2));
  });
</script>
</body>
</html>
